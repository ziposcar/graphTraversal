# graphTraversal

* 运行环境
* 使用方法
* 常见问题

---

## 运行环境

本程序运行环境如下:
* windows 10
* python 2.7.14
* nginx 1.12.2
* mysql 5.7
* redis 3.2
* php 5.6
* firefox 67.0
* geckodriver 0.24

实验机已经安装好所有所需要的环境,并做好了相关配置.现配置状态如下:
* mysql注册服务并开机自启
* redis-server注册服务并开机自启
* mysql默认字符修改为utf8mb4
* nginx相关配置(详见`d:\software\nginx\conf\nginx.conf`)
* php安装redis读写插件
* python使用virtualenv建立虚拟环境`env`

## 使用方法

### 程序的启动与部署

作者为本程序的启动编写了脚本.开机后初次启动时运行`build.bat`脚本.如中途关闭主程序的命令行,需重新启动时,运行`run.bat`脚本.非初次启动但关闭了所有命令行时,需手动kill掉后台的nginx进程之后,运行`build.bat`脚本.

### 程序配置文件

测试用例生成程序的主要配置放在`config.py`文件中.新增的`multi_process_count`配置代表线程池的容量,也是初始化的浏览器进程数,可以将其设为`1`从而简单地实现串行(faqforge分支未做该改造).

数据库连接指令: mysql -uroot -p1234

### 不同分支的含义

针对不同被测程序的不同代码放在了不同分支.分支名前缀为`multi_process_`表示使用线程池实现,前缀为`multiplex_driver_`表示仅实现了串行的浏览器复用.分支名的后缀代表了对应的被测程序.

## 常见问题

---

q:切换分支后提示我需要merge?

a:由于我们的`config.py`和`seq_to_scripts.py`文件经常用于切换串并行与浏览器的前后台(headless),如果和上次commit出现不同就切其他分支会需要merge.故无功能性的修改的话,在切换分支前`git reset --hard`是较简单的解决方法.

---

q:phpaaCMS/addressbook提示我(路径有问题/找不到文件)?

a:部分被测程序需要自定义的本地文件,如头像图片或数据清洗的脚本.自行更改下计即可.

---

q:为什么我手动访问被测程序时,域名自动变成了奇怪的形式(或检查`redis`的对应键没有数据或键名错误)?

a:`php`和`nginx`都提供了自动末尾`/`符号的补全,但两者根据的规则不同,甚至有的被测程序内部还会做对`/`符号补全的跳转.故我们通过手动输入url的形式访问被测程序的时候,应保证结尾有`/`符号(符合restful规范),否则将会出现由于转发带来的各种问题.

---

q:安装与运行一切正常,但某些迁移就是一遇到就卡住不动?

a:这是串行时也可能发生的问题,来源于部分对空数组元素中某一对象的操作.解决方法:可以先提前加入多组数据,也可修改代码,在种群与种群之间添加数据恢复的代码段(前一种方法可以很好的解决问题,故除了`schoolmate`以外没有做第二种改造).

---

